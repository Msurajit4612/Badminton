<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KAKDWIP SHUTTLE SHOWDOWN 2026</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{
  min-height:100vh;
  background:url("794a8c7d610aa877b32aebdd32265d0e_1200x1200_crop_center.jpg") center/cover fixed;
}
.overlay{
  min-height:100vh;
  background:rgba(0,0,0,.78);
  color:#fff;
  padding:16px 12px 140px;
  text-align:center;
}
h1,h2{margin:10px 0}
h2{color:#ffcc00}
.team-inputs{
  max-width:900px;
  margin:auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:8px;
}
.team-inputs input{
  padding:10px;
  border-radius:6px;
  border:none;
}
.groups,.matches{
  display:flex;
  gap:16px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:15px;
}
.group,.match-box{
  width:280px;
  background:rgba(255,255,255,.12);
  padding:14px;
  border-radius:14px;
}
ul{list-style:none}
li{
  padding:8px;
  border-bottom:1px solid rgba(255,255,255,.25);
}

/* BUTTON BAR */
.button-bar{
  position:fixed;
  bottom:20px;
  left:0;
  right:0;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:8px;
  background:rgba(0,0,0,.85);
  padding:10px;
  z-index:999;
}
button{
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#ffcc00;
  cursor:pointer;
  font-weight:bold;
}
button:disabled{background:#777}
button.active{animation:blink 1s infinite}
@keyframes blink{
  0%,100%{box-shadow:0 0 6px #ffcc00}
  50%{box-shadow:0 0 16px #ffcc00}
}

/* LOADER */
.loader{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:2000;
}
.shuttle{font-size:48px;animation:fly 1s infinite alternate}
@keyframes fly{from{transform:translateX(-40px)}to{transform:translateX(40px)}}
</style>
</head>

<body>

<audio id="beep">
  <source src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3">
</audio>

<div class="overlay">

<h1>KAKDWIP SHUTTLE SHOWDOWN 2026</h1>
<h2>Organised By â€“ Badminton Lovers</h2>

<div class="team-inputs" id="teamInputs"></div>

<h2 id="sec-groups">ğŸ¸ Groups</h2>
<div class="groups">
  <div class="group"><h2>A</h2><ul id="groupA"></ul></div>
  <div class="group"><h2>B</h2><ul id="groupB"></ul></div>
  <div class="group"><h2>C</h2><ul id="groupC"></ul></div>
</div>

<h2 id="sec-groupmatch">ğŸ¸ Group Matches</h2>
<div class="matches">
  <div class="match-box"><h2>A</h2><ul id="matchA"></ul></div>
  <div class="match-box"><h2>B</h2><ul id="matchB"></ul></div>
  <div class="match-box"><h2>C</h2><ul id="matchC"></ul></div>
</div>

<h2 id="sec-next">ğŸ† Next Round</h2>
<div class="matches">
  <div class="match-box"><h2>A</h2><ul id="nextA"></ul></div>
  <div class="match-box"><h2>B</h2><ul id="nextB"></ul></div>
  <div class="match-box"><h2>C</h2><ul id="nextC"></ul></div>
</div>

<h2 id="sec-super">ğŸ”¥ Super Six</h2>
<div class="matches">
  <div class="match-box"><h2>Group E</h2><ul id="groupE"></ul></div>
  <div class="match-box"><h2>Group F</h2><ul id="groupF"></ul></div>
</div>

</div>

<!-- BUTTON BAR -->
<div class="button-bar">
  <button onclick="startDraw(this)">Draw Groups</button>
  <button onclick="groupMatches(this)" disabled>Group Matches</button>
  <button onclick="nextRound(this)" disabled>Next Round</button>
  <button onclick="superSix(this)" disabled>Super Six</button>
  <button onclick="exportPDF()">Export PDF</button>
</div>

<div class="loader" id="loader">
  <div class="shuttle">ğŸ¸</div>
  <p id="loaderText">Processing...</p>
</div>

<script>
const teamInputs=document.getElementById("teamInputs");
const loader=document.getElementById("loader");
const loaderText=document.getElementById("loaderText");
const beep=document.getElementById("beep");

let groups={A:[],B:[],C:[]};

for(let i=1;i<=24;i++){
  let input=document.createElement("input");
  input.placeholder="Team "+i;
  teamInputs.appendChild(input);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function activate(btn,sec){
  document.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  beep.play();
  document.getElementById(sec)?.scrollIntoView({behavior:"smooth"});
}

function showLoader(text,cb){
  loaderText.textContent=text;
  loader.style.display="flex";
  setTimeout(()=>{loader.style.display="none";cb();},800);
}

/* ğŸ”¥ FINAL GROUP DRAW (8â€“8â€“8 GUARANTEED) */
function startDraw(btn){
  let teams=[];
  document.querySelectorAll("input").forEach(i=>{
    if(i.value.trim()) teams.push(i.value.trim());
  });
  if(teams.length!==24){alert("Enter exactly 24 teams");return;}

  showLoader("Drawing Groups...",()=>{
    groups={A:[],B:[],C:[]};
    let capacity={A:8,B:8,C:8};

    let map={};
    teams.forEach(t=>{
      let key=t.split(" ").slice(0,2).join(" ").toLowerCase();
      if(!map[key]) map[key]=[];
      map[key].push(t);
    });

    Object.values(map).forEach(list=>{
      shuffle(list);
      let order=["A","B","C"].filter(g=>capacity[g]>0);
      shuffle(order);

      list.forEach(team=>{
        let possible=order.filter(g=>capacity[g]>0);
        let g=possible[Math.floor(Math.random()*possible.length)];
        groups[g].push(team);
        capacity[g]--;
      });
    });

    ["A","B","C"].forEach(g=>{
      document.getElementById("group"+g).innerHTML=
        groups[g].map(t=>`<li>${t}</li>`).join("");
    });

    document.querySelectorAll(".button-bar button")[1].disabled=false;
    activate(btn,"sec-groups");
  });
}

function groupMatches(btn){
  showLoader("Group Matches...",()=>{
    ["A","B","C"].forEach(g=>{
      let t=[...groups[g]];
      shuffle(t);
      document.getElementById("match"+g).innerHTML=
        `<li>${t[0]} ğŸ†š ${t[1]}</li>
         <li>${t[2]} ğŸ†š ${t[3]}</li>
         <li>${t[4]} ğŸ†š ${t[5]}</li>
         <li>${t[6]} ğŸ†š ${t[7]}</li>`;
    });
    document.querySelectorAll(".button-bar button")[2].disabled=false;
    activate(btn,"sec-groupmatch");
  });
}

function nextRound(btn){
  showLoader("Next Round...",()=>{
    ["A","B","C"].forEach(g=>{
      let w=["Winner 1","Winner 2","Winner 3","Winner 4"];
      shuffle(w);
      document.getElementById("next"+g).innerHTML=
        `<li>${w[0]} ğŸ†š ${w[3]}</li>
         <li>${w[1]} ğŸ†š ${w[2]}</li>`;
    });
    document.querySelectorAll(".button-bar button")[3].disabled=false;
    activate(btn,"sec-next");
  });
}

function superSix(btn){
  showLoader("Super Six...",()=>{
    let six=[
      "Group A 1st","Group A 2nd",
      "Group B 1st","Group B 2nd",
      "Group C 1st","Group C 2nd"
    ];
    shuffle(six);
    document.getElementById("groupE").innerHTML=six.slice(0,3).map(t=>`<li>${t}</li>`).join("");
    document.getElementById("groupF").innerHTML=six.slice(3).map(t=>`<li>${t}</li>`).join("");
    activate(btn,"sec-super");
  });
}

function exportPDF(){
  const { jsPDF } = window.jspdf;
  const pdf=new jsPDF();
  pdf.text(document.body.innerText,10,10);
  pdf.save("Badminton_Fixture.pdf");
}
</script>

</body>
</html>
