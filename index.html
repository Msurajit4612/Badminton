<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Badminton Tournament Lottery</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{
    min-height:100vh;
    background-image:url("794a8c7d610aa877b32aebdd32265d0e_1200x1200_crop_center.jpg");
    background-size:cover;
    background-position:center;
}
.overlay{
    min-height:100vh;
    background:rgba(0,0,0,0.75);
    padding:20px;
    text-align:center;
    color:white;
}
h1{margin-bottom:10px}

.team-inputs{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:8px;
    max-width:800px;
    margin:15px auto;
}
.team-inputs input{
    padding:8px;
    border-radius:6px;
    border:none;
}
button{
    padding:12px 30px;
    font-size:18px;
    border-radius:8px;
    border:none;
    background:#ffcc00;
    cursor:pointer;
    margin:15px 0;
}
button:disabled{background:#aaa}

.groups,.matches{
    display:flex;
    justify-content:center;
    gap:20px;
    flex-wrap:wrap;
}

.group,.match-box{
    background:rgba(255,255,255,0.12);
    width:260px;
    padding:15px;
    border-radius:12px;
}

.group h2,.match-box h2{
    color:#ffcc00;
    margin-bottom:8px;
}

ul{list-style:none}
li{
    padding:5px 0;
    border-bottom:1px solid rgba(255,255,255,0.25);
}

/* Loader */
.loader-overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.9);
    display:none;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:999;
}
.court{
    width:80%;
    height:120px;
    border-top:3px solid #fff;
    border-bottom:3px solid #fff;
    position:relative;
    overflow:hidden;
    margin-bottom:20px;
}
.shuttle{
    position:absolute;
    font-size:48px;
    top:30px;
    animation:fly 1.2s linear infinite alternate;
}
@keyframes fly{
    0%{left:0%;transform:rotate(-20deg)}
    100%{left:90%;transform:rotate(20deg)}
}
</style>
</head>

<body>

<div class="overlay">
<h1>üè∏ Badminton Tournament Fixture Lottery üèÜ</h1>
<p>Enter 24 Team Names</p>

<div class="team-inputs" id="teamInputs"></div>
<button id="drawBtn" onclick="startDraw()">Draw Groups</button>

<div class="groups">
    <div class="group"><h2>Group A</h2><ul id="groupA"></ul></div>
    <div class="group"><h2>Group B</h2><ul id="groupB"></ul></div>
    <div class="group"><h2>Group C</h2><ul id="groupC"></ul></div>
</div>

<h2 style="margin:25px 0;color:#ffcc00">üè∏ Group Matches</h2>
<div class="matches">
    <div class="match-box"><h2>Group A</h2><ul id="matchA"></ul></div>
    <div class="match-box"><h2>Group B</h2><ul id="matchB"></ul></div>
    <div class="match-box"><h2>Group C</h2><ul id="matchC"></ul></div>
</div>
</div>

<!-- Loader -->
<div class="loader-overlay" id="loader">
    <div class="court"><div class="shuttle">üè∏</div></div>
    <div>Drawing Groups...</div>
</div>

<script>
const teamInputsDiv=document.getElementById("teamInputs");
const loader=document.getElementById("loader");
const drawBtn=document.getElementById("drawBtn");

for(let i=1;i<=24;i++){
    const input=document.createElement("input");
    input.placeholder="Team "+i;
    teamInputsDiv.appendChild(input);
}

function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
    }
}

function getPrefix(name){
    return name.trim().split(/\s+/).slice(0,2).join(" ").toLowerCase();
}

function startDraw(){
    const inputs=document.querySelectorAll(".team-inputs input");
    let teams=[];
    inputs.forEach(i=>{if(i.value.trim())teams.push(i.value.trim())});

    if(teams.length!==24){
        alert("Please enter all 24 team names");
        return;
    }

    drawBtn.disabled=true;
    loader.style.display="flex";

    setTimeout(()=>{
        drawLottery(teams);
        loader.style.display="none";
        drawBtn.disabled=false;
    },6000);
}

function drawLottery(teams){
    shuffle(teams);

    let prefixMap={},groups={A:[],B:[],C:[]};
    let order=["A","B","C"],idx=0;

    teams.forEach(t=>{
        const k=getPrefix(t);
        if(!prefixMap[k])prefixMap[k]=[];
        prefixMap[k].push(t);
    });

    for(let list of Object.values(prefixMap)){
        shuffle(list);
        for(let t of list){
            for(let i=0;i<3;i++){
                let g=order[(idx+i)%3];
                let count=groups[g].filter(x=>getPrefix(x)===getPrefix(t)).length;
                if(groups[g].length<8 && count<2){
                    groups[g].push(t);
                    idx++;
                    break;
                }
            }
        }
    }

    show("groupA",groups.A);
    show("groupB",groups.B);
    show("groupC",groups.C);

    generateMatches(groups);
}

function generateMatches(groups){
    createMatches("matchA",groups.A);
    createMatches("matchB",groups.B);
    createMatches("matchC",groups.C);
}

function createMatches(id,list){
    const ul=document.getElementById(id);
    ul.innerHTML="";
    let temp=[...list];
    shuffle(temp); // Random pairing

    for(let i=0;i<temp.length;i+=2){
        const li=document.createElement("li");
        li.textContent=temp[i]+"  üÜö  "+temp[i+1];
        ul.appendChild(li);
    }
}

function show(id,list){
    const ul=document.getElementById(id);
    ul.innerHTML="";
    list.forEach(t=>{
        const li=document.createElement("li");
        li.textContent=t;
        ul.appendChild(li);
    });
}
</script>

</body>
</html>
